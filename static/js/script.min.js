var ParseUrl=function(){function e(e){this.url=e,this.parse()}var t=e.prototype;return t.parse=function(){var e,t,r=document.createElement("a"),a={},s=[];for(r.href=this.url,s=r.search.replace(/^\?/,"").split("&"),t=0;t<s.length;t++)""!==(e=s[t].split("="))[0]&&null!==e[0]?a[e[0]]=e[1]:null===e[1]&&(a[e[0]]=!0);this.protocol=r.protocol,this.host=r.host,this.hostname=r.hostname,this.port=r.port,this.pathname=r.pathname,this.search=r.search,this.searchObject=a,this.hash=r.hash},t.queryString=function(){var t=this;return Object.keys(this.searchObject).map(function(e){return escape(e)+"="+escape(t.searchObject[e])}).join("&")},t.buildUrl=function(){var e=this.queryString();return this.protocol+"//"+this.host+this.pathname+"?"+e},e}(),setAudiences=function(e){var t=e,r=Array.isArray(t),a=0;for(t=r?t:t[Symbol.iterator]();;){var s;if(r){if(a>=t.length)break;s=t[a++]}else{if((a=t.next()).done)break;s=a.value}var n=jQuery(s),i=n.data("set-audience"),h=n.attr("href");if(h){var c=new ParseUrl(h);if(c.searchObject.hasOwnProperty("audience")&&c.searchObject.audience)return;void 0===c.searchObject.audience&&c.searchObject.hasOwnProperty("audience")||(c.searchObject.audience=i,h=c.buildUrl(),n.attr("href",h))}}};!function(){var e=jQuery("[data-set-audience]");0<e.length&&setAudiences(e)}();